<!doctype html>
<html lang="en" data-theme="light">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Local-First WASM Demo</title>
        <link rel="stylesheet" href="style.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    </head>
    <body>
        <!-- Theme Toggle -->
        <div class="theme-toggle">
            <button class="theme-switch" onclick="toggleTheme()" aria-label="Toggle theme">
                <div class="theme-switch-slider">üåô</div>
            </button>
        </div>

        <div class="container">
            <!-- Header -->
            <header class="header animate-fade-in-up">
                <div>
                    <h1>Local-First WASM</h1>
                    <p>Demonstrating Go WebAssembly with neumorphic design</p>
                </div>
            </header>

            <!-- API Status -->
            <div class="status animate-slide-in-right">
                <div class="status-dot loading" id="statusIndicator"></div>
                <span id="statusText">Loading Go WASM API...</span>
            </div>

            <!-- Function Demos -->
            <div class="grid">
                <!-- Text Processing -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Text Processing</h2>
                        <p class="card-subtitle">Analyze and process text with WASM</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="textInput">Input Text</label>
                        <textarea
                            id="textInput"
                            placeholder="Enter text to analyze..."
                            class="form-textarea"
                        >The quick brown fox jumps over the lazy dog. This is a sample sentence for testing. Go WASM makes client-side processing powerful and efficient.</textarea>
                    </div>
                    <button onclick="processText()" class="btn btn-primary">
                        Process Text
                    </button>
                    <div id="textResults" class="result hidden">
                        <pre></pre>
                    </div>
                </div>

                <!-- Statistics Calculator -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Statistics Calculator</h2>
                        <p class="card-subtitle">Calculate statistical measures</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="numbersInput">Numbers</label>
                        <input
                            id="numbersInput"
                            placeholder="Enter numbers separated by commas..."
                            value="1, 2, 3, 4, 5, 10, 15, 20, 25, 30"
                            class="form-input"
                        />
                    </div>
                    <button onclick="calculateStats()" class="btn btn-success">
                        Calculate Statistics
                    </button>
                    <div id="statsResults" class="result hidden">
                        <pre></pre>
                    </div>
                </div>

                <!-- Input Validation -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Input Validation</h2>
                        <p class="card-subtitle">Validate different input formats</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="validateInput">Input to Validate</label>
                        <input
                            id="validateInput"
                            placeholder="Enter text to validate..."
                            value="user@example.com"
                            class="form-input"
                        />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="validationType">Validation Type</label>
                        <select id="validationType" class="form-select">
                            <option value="email">Email</option>
                            <option value="url">URL</option>
                            <option value="phone">Phone</option>
                            <option value="json">JSON</option>
                        </select>
                    </div>
                    <button onclick="validateInput()" class="btn btn-warning">
                        Validate Input
                    </button>
                    <div id="validateResults" class="result hidden">
                        <pre></pre>
                    </div>
                </div>

                <!-- ID Generator -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ID Generator</h2>
                        <p class="card-subtitle">Generate unique identifiers</p>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="idType">ID Type</label>
                        <select id="idType" class="form-select">
                            <option value="uuid">UUID</option>
                            <option value="short">Short ID</option>
                            <option value="numeric">Numeric</option>
                            <option value="timestamp">Timestamp</option>
                        </select>
                    </div>
                    <button onclick="generateID()" class="btn btn-error">
                        Generate ID
                    </button>
                    <div id="idResults" class="result hidden">
                        <pre></pre>
                    </div>
                </div>
            </div>

            <!-- JSON Formatter -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">JSON Formatter</h2>
                    <p class="card-subtitle">Format and prettify JSON data</p>
                </div>
                <div class="form-group">
                    <label class="form-label" for="jsonInput">JSON Input</label>
                    <textarea
                        id="jsonInput"
                        placeholder="Enter JSON to format..."
                        class="form-textarea"
                    >{"name":"John Doe","age":30,"city":"New York","hobbies":["reading","swimming","coding"]}</textarea>
                </div>
                <button onclick="formatJSON()" class="btn btn-primary">
                    Format JSON
                </button>
                <div id="jsonResults" class="result hidden">
                    <pre></pre>
                </div>
            </div>

            <!-- API Information -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">API Information</h2>
                    <p class="card-subtitle">Get runtime version info</p>
                </div>
                <button onclick="getVersion()" class="btn btn-warning">
                    Get Version Info
                </button>
                <div id="versionResults" class="result hidden">
                    <pre></pre>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="wasm_exec.js"></script>
        <script src="app.js"></script>
        <script>
            // Theme switching functionality
            function toggleTheme() {
                const html = document.documentElement;
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                html.setAttribute('data-theme', newTheme);
                window.localStorage.setItem('theme', newTheme);
                
                // Update theme toggle icon
                const slider = document.querySelector('.theme-switch-slider');
                slider.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
                
                // Animate theme change
                anime({
                    targets: '.card, .status',
                    scale: [1, 0.98, 1],
                    duration: 300,
                    easing: 'easeOutQuad'
                });
            }
            
            // Load saved theme
            document.addEventListener('DOMContentLoaded', function() {
                const savedTheme = window.localStorage.getItem('theme') || 'light';
                document.documentElement.setAttribute('data-theme', savedTheme);
                
                const slider = document.querySelector('.theme-switch-slider');
                slider.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
                
                // Animate cards on load
                anime({
                    targets: '.card',
                    translateY: [30, 0],
                    opacity: [0, 1],
                    delay: anime.stagger(100),
                    duration: 800,
                    easing: 'easeOutQuad'
                });
            });
            
            // Enhanced result display function
            function showResult(elementId, data, isSuccess = true) {
                const element = document.getElementById(elementId);
                const pre = element.querySelector('pre');
                
                element.classList.remove('success', 'error', 'show');
                element.classList.add(isSuccess ? 'success' : 'error');
                
                pre.textContent = typeof data === 'string' ? data : JSON.stringify(data, null, 2);
                
                element.classList.remove('hidden');
                element.classList.add('show');
                
                // Animate result appearance
                anime({
                    targets: element,
                    scale: [0.95, 1],
                    duration: 300,
                    easing: 'easeOutBack'
                });
            }
        </script>
    </body>
</html>
